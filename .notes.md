# Notes

The primary objective of this software is to improve research capabilities within a Zotero library. @src/build_kb.py is responsible for transforming the library into a searchable knowledge base (KB). @src/cli.py manages access to the KB, which is utilized for conducting research. You also have direct access to the KB data located in kb_data/ and the full-text papers found in kb_data/papers/. This allows you to follow a two-step process: first, use semantic search to identify the most relevant papers, and then analyze these papers to generate a report.

Usage: cli.py [OPTIONS] COMMAND [ARGS]...

  Research Assistant CLI v4.0 - Search and analyze academic papers.

  Common commands:
    search      Search papers by topic with quality scores
    get         Retrieve full text of a specific paper
    info        Show knowledge base status
    cite        Generate IEEE citations

  Features:
    • SPECTER embeddings for semantic search
    • Quality scoring (0-100) based on study type and recency
    • Study type detection (RCTs, systematic reviews, etc.)
    • Smart incremental updates from Zotero

  Quick start:
    python src/cli.py info                    # Check KB status
    python src/cli.py search "diabetes"       # Search papers
    python src/cli.py get 0001                # Get full paper

Options:
  --help  Show this message and exit.

Commands:
  cite          Generate IEEE-style citations for papers matching query.
  diagnose      Check knowledge base health and integrity.
  get           Get full text of a paper by ID.
  info          Show information about the knowledge base.
  search        Search for relevant papers using SPECTER embeddings.
  smart-search  Smart search with automatic section chunking to handle...

Usage: cli.py search [OPTIONS] QUERY_TEXT

  Search for relevant papers using SPECTER embeddings.

  Quality markers:
    ⭐ Excellent (80-100): Systematic reviews, meta-analyses
    ● Good (60-79): RCTs, recent high-quality studies
    ○ Moderate (40-59): Cohort studies, older papers
    · Lower (<40): Case reports, generic studies

  Examples:
    python src/cli.py search "diabetes"                    # Basic search
    python src/cli.py search "diabetes" --show-quality     # With scores
    python src/cli.py search "AI" --quality-min 70        # High quality only
    python src/cli.py search "COVID" --after 2020 --type rct  # Recent RCTs

Options:
  -k, --top-k INTEGER             Number of results to return (default: 10)
  -v, --verbose                   Show abstracts in results
  --show-quality                  Show quality scores in results
  --quality-min INTEGER           Minimum quality score (0-100)
  --json                          Output as JSON for processing
  --after INTEGER                 Only papers published after this year (e.g.,
                                  --after 2020)
  --type [systematic_review|rct|cohort|case_control|cross_sectional|case_report|study]
                                  Filter by study type (can specify multiple,
                                  e.g., --type rct --type systematic_review)
  --help                          Show this message and exit.

Usage: cli.py smart-search [OPTIONS] QUERY_TEXT

  Smart search with automatic section chunking to handle 20+ papers.

  Automatically selects relevant sections based on query to maximize the
  number of papers that can be analyzed without context overflow.

  Examples:     cli.py smart-search "diabetes treatment methods" -k 30
  cli.py smart-search "clinical outcomes" --sections results conclusion

Options:
  -k, --top-k INTEGER             Number of papers to retrieve (default: 20)
  --max-tokens INTEGER            Max tokens to load (default: 10000, ~40k
                                  chars)
  -s, --sections [abstract|introduction|methods|results|discussion|conclusion]
                                  Sections to prioritize (default: abstract,
                                  introduction, conclusion)
  --help                          Show this message and exit.


Research-assistant in a simple light weight python CLI tool designed to enhance research capabilities within a Zotero library. @src/build_kb.py is tasked with transforming the library into a searchable knowledge base (KB). @src/cli.py oversees access to the KB, which is used to conduct research based on user requests. It enables a two-step process: first, it utilizes semantic search to identify the most relevant papers, and then it analyzes these papers to generate a report.

Recommend an optimized version of @src/.claude/commands/research.md that makes optimal use of the tools provided by @src/build_kb.py and @src/cli.py, provide the best research reports, and enhance user experience.

 Recommend improvements that wil either improve the quality of the research reports, enhance the user experience, or increase maintainability.

remove all fallback code, backwards compatibility, and legacy paths to simplify the code. Users will need to delete and rebuild their knowledge base for any upgrades.

scan for unused functions and methods

Scan for magic numbers

scan for duplicated code

scan for unused tests

scan for dead code