{
  "paper_id": "WBEHWZZN",
  "title": "Diagnostic reasoning prompts reveal the potential for large language model interpretability in medicine",
  "abstract": "One of the major barriers to using large language models (LLMs) in medicine is the perception they use uninterpretable methods to make clinical decisions that are inherently different from the cognitive processes of clinicians. In this manuscript we develop diagnostic reasoning prompts to study whether LLMs can imitate clinical reasoning while accurately forming a diagnosis. We find that GPT-4 can be prompted to mimic the common clinical reasoning processes of clinicians without sacrificing diagnostic accuracy. This is significant because an LLM that can imitate clinical reasoning to provide an interpretable rationale offers physicians a means to evaluate whether an LLMs response is likely correct and can be trusted for patient care. Prompting methods that use diagnostic reasoning have the potential to mitigate the \"black box\" limitations of LLMs, bringing them one step closer to safe and effective use in medicine.",
  "year": 2023,
  "date": "2023",
  "authors": [
    {
      "name": "Thomas Savage",
      "email": "tsavage@stanford.edu",
      "orcid": "0000-0003-4828-5802",
      "affiliation": {
        "organization": "Department of Medicine",
        "department": "Department of Medicine",
        "institution": "Stanford University",
        "address": "Stanford, CA, USA"
      }
    },
    {
      "name": "Ashwin Nayak",
      "orcid": "0009-0003-2024-3683",
      "affiliation": {
        "organization": "Department of Medicine",
        "department": "Department of Medicine",
        "institution": "Stanford University",
        "address": "Stanford, CA, USA"
      }
    },
    {
      "name": "Robert Gallo",
      "affiliation": {
        "organization": "Palo Alto Veterans Affairs Medical Center",
        "institution": "Palo Alto Veterans Affairs Medical Center",
        "address": "Palo Alto, CA, USA"
      }
    },
    {
      "name": "Ekanath Rangan",
      "orcid": "0000-0001-5168-3508",
      "affiliation": {
        "organization": "Department of Medicine",
        "department": "Department of Medicine",
        "institution": "Stanford University",
        "address": "Stanford, CA, USA"
      }
    },
    {
      "name": "Jonathan Chen",
      "orcid": "0000-0002-4387-8740",
      "affiliation": {
        "organization": "Department of Medicine",
        "department": "Department of Medicine",
        "institution": "Stanford University",
        "address": "Stanford, CA, USA"
      }
    }
  ],
  "doi": "10.1038/s41746-024-01010-1",
  "orcid": "0000-0002-4387-8740",
  "md5": "FA062DCA3078AF7EA37BBC56365B96F2",
  "publication": {
    "journal": "JAMA Intern. Med",
    "journal_inferred": true
  },
  "funding": [
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "ACKNOWLEDGEMENTS J.H.C. has received research funding support in part by the  NIH/National Institute of Allergy and Infectious Diseases  ( 1R01AI17812101 ),  NIH/National Institute on Drug Abuse Clinical Trials Network  ( UG1DA015815-CTN-0136 ),  Gordon and Betty Moore Foundation  (Grant # 12409 ),  Stanford Artificial Intelligence in Medicine and Imaging- Human-Centered Artificial Intelligence (AIMI-HAI ) Partnership Grant,  Google Inc . Research collaboration,  American Heart Association- Strategically Focused Research Network-Diversity in Clinical Trials , and the  NIH-NCATS-CTSA  grant ( UL1TR003142 ) for common research resources. R.G. is supported by a  VA Advanced Fellowship in Medical Informatics . The views expressed are those of the authors and not necessarily those of the  Department of Veterans Affairs  or those of the  United States Government ."
  ],
  "sections": [
    {
      "title": "INTRODUCTION",
      "text": "Large language models (LLMs) are artificial intelligence systems trained on large amounts of text data that learn complex language patterns and syntactical relationships to both interpret passages and generate text output  1, 2  LLMs have received widespread attention for their human-like performance on a wide variety of text-generating tasks. Within medicine, initial efforts have demonstrated that LLMs can write clinical notes  3  , pass standardized medical exams  4  , and draft responses to patient questions  5, 6  . In order to integrate LLMs more directly into clinical care, it is imperative to better understand their clinical reasoning capabilities.\n\nClinical reasoning is a set of problem-solving processes specifically designed for diagnosis and management of a patient's medical condition. Commonly used diagnostic techniques include differential diagnosis formation, intuitive reasoning, analytical reasoning, and Bayesian inference. Early assessments of the clinical reasoning abilities of LLMs have been limited, studying model responses to multiple-choice questions  [7] [8] [9] [10] [11]  . More recent work has focused on free-response clinical questions and suggests that newer LLMs, such as GPT-4, show promise in diagnosis of challenging clinical cases  12, 13  .\n\nPrompt engineering is emerging as a discipline in response to the phenomena that LLMs can perform substantially differently depending on how questions and prompts are posed to them  14, 15  . Advanced prompting techniques have demonstrated improved performance on a range of tasks  16  , while also providing insight into how LLMs came to a conclusion (as demonstrated by Wei et  al. and Lightman et al. in arithmetic reasoning, common sense reasoning, and symbolic reasoning)  17, 18  . A notable example is Chain-of-thought (CoT) prompting, which involves instructing the LLM to divide its task into smaller reasoning steps and then complete the task step-by-step  17  . Given that clinical reasoning tasks regularly use step-by-step processes, CoT prompts modified to reflect the cognitive processes taught to and utilized by clinicians might elicit better understanding of LLM performance on clinical reasoning tasks.\n\nIn this paper we evaluate the performance of GPT-3.5 and GPT-4  19  on open-ended clinical questions assessing diagnostic reasoning. Specifically, we evaluate LLM performance on a modified MedQA USMLE (United States Medical Licensing Exam) dataset  20  , and further evaluate GPT-4 performance on the diagnostically difficult NEJM (New England Journal of Medicine) case series  21  . We compare traditional CoT prompting with several \"diagnostic reasoning\" prompts that are modeled after the cognitive processes of differential diagnosis formation, intuitive reasoning, analytical reasoning, and Bayesian inference. This study assesses whether LLMs can imitate clinical reasoning abilities using specialized instructional prompts that combine clinical expertise and advanced prompting methods. We hypothesize GPT models will have superior performance with diagnostic reasoning prompts in comparison to traditional CoT prompting.\n\nA modified version of the MedQA USMLE question dataset was used for this study. Questions were converted to free response by removing the multiple-choice options after the question stem. Only Step 2 and Step 3 USMLE questions were included, as Step 1 questions focus heavily on memorization of facts rather than clinical reasoning skills  10  . Only questions evaluating the task of diagnosing a patient were included to simplify prompt engineering. A training set of 95 questions was used for iterative prompt development and a test set of 518 questions was reserved for evaluation. The full test set can be found in Supplementary Data 1.\n\nGPT-4 performance was also evaluated on the New England Journal of Medicine (NEJM) Case Records series. The NEJM Case Records series is designed as an educational resource for physicians, with each case providing a clinical case description followed by expert analysis of the case with a clinical diagnosis. We included the 310 most recently published cases in this study. Ten cases were excluded because they either did not provide a definitive final diagnosis or exceeded the maximum context length of the GPT-4 API. A full list of all cases included (by title and DOI number) can be found in Supplementary Data 2. For this evaluation, we compared traditional CoT prompting to the highest performing clinical reasoning CoT prompt (differential diagnosis reasoning) on the modified MedQA dataset.\n\nOne traditional CoT prompt and four clinical reasoning prompts were developed (differential diagnosis, analytical, Bayesian and intuitive reasoning). Each prompt included two example questions (Table  1 ) with rationales employing the target reasoning strategy. This is a technique known as few-shot learning  14  . The full prompts used for the MedQA dataset are provided in Table  2 ; the full prompts used for the NEJM challenge set are provided in Supplementary Note 1.\n\nExample LLM responses for each prompting strategy can be found in Fig.  1  for GPT-3.5 and Fig.  2  for GPT-4. Full results can be found in Supplementary Data 1 and 2."
    },
    {
      "title": "RESULTS",
      "text": "GPT-3.5 correctly answered 46% of questions using traditional CoT prompting, compared to 31% with zero-shot non-CoT prompting. Among the clinical reasoning prompts, GPT-3.5 achieved the highest performance with intuitive reasoning (48% vs. 46%, difference of +1.7%, CI -2.5% to +5.9%, p = 0.4). Compared to traditional CoT, GPT-3.5's performance was significantly worse with analytic reasoning (40%, difference of -6%, CI -11% to -1.5%, p = 0.001) and differential diagnosis formation (38%, difference of -8.9%, CI -14% to -3.4%, p = <0.001), while Bayesian inference performance nearly missed our threshold for statistical significance (42%, difference of -4.4%, CI -9.1% to +0.2%, p = 0.02). Results can be referenced in Table  3 . Inter-rater agreement for the MedQA GPT-3.5 evaluation was 97% with a Cohen's Kappa of 0.93.\n\nThe GPT-4 API generated an error for 20 questions of the test set, reducing the test set size to 498. Overall, GPT-4 demonstrated improved accuracy over GPT-3.5. GPT-4 achieved an accuracy of 76% with traditional CoT, 77% with intuitive reasoning (+0.8%, CI -3.6% to +5.2%, p = 0.73), 78% with differential diagnosis (+2.2%, CI -2.3% to +6.7%, p = 0.24), 78% with analytic reasoning (+1.6%, CI -2.4% to +5.6%, p = 0.35), and 72% with Bayesian Inference (-3.4%, CI -9.1% to +1.2%, p = 0.07). Results can be found in Table  4 . Inter-rater agreement for the GPT-4 MedQA evaluation was 99% with a Cohen's Kappa of 0.98.\n\nOn the NEJM challenge case set GPT-4 achieved an accuracy of 38% with traditional CoT compared to 34% with differential diagnosis CoT (difference of -4.2%, 95% CI -11.4% to +2.1%, p = 0.09, Table  5 ). Inter-rater agreement for the GPT-4 NEJM evaluation was 97% with a Cohen's Kappa of 0.93. GPT-4 response and rationale results for the entire NEJM test set are included in Supplementary Data 2."
    },
    {
      "title": "DISCUSSION",
      "text": "In this study we found that GPT-3.5 performance was similar with traditional and intuitive reasoning CoT prompts, but significantly worse with differential diagnosis and analytical CoT prompts. Bayesian inference CoT also demonstrated worse performance than traditional CoT, but the decrease in performance did not meet our significance threshold. These findings suggest GPT-3.5 is not able to imitate advanced clinical reasoning processes to arrive at an accurate diagnosis. In contrast, GPT-4 demonstrated similar performance between traditional and diagnostic reasoning CoT prompts. While these findings highlight the significant advancement in reasoning abilities between GPT-3.5 and GPT-4, diagnostic reasoning does not increase GPT-4 accuracy like it would for a human provider. We propose three possible explanations for this finding. First, GPT-4's reasoning mechanisms could be inherently different than human providers and therefore does not derive benefit from diagnostic reasoning strategies. Second, GPT-4 could be explaining its diagnostic evaluation post-hoc in the desired diagnostic reasoning format instead of strictly using the prompted diagnostic reasoning strategy. Third, GPT-4 could have reached a maximal accuracy with the vignette information provided and we are thus unable to detect an accuracy difference between prompting strategies. Regardless of the underlying reason, we observe GPT-4 has developed the ability to successfully imitate clinical reasoning thought processes but cannot apply clinical reasoning like a human.\n\nThe finding that GPT-4 can successfully imitate the same cognitive processes as physicians to arrive accurately at an answer is still significant because of the potential for interpretability. We define interpretability as the property that allows a human operator to explore qualitative relationships between inputs and outputs  22  . A model that generates a clinical reasoning rationale when suggesting a diagnosis offers the clinician an interpretable means to assess whether the answer is true or false based on the rationale's factual and logical accuracy. A workflow that aligns model outputs in this way (Fig.  3 ) could mitigate the \"black box\" limitations of LLMs, as long as physicians recognize that language models will always be at risk of unpredictable reasoning hallucinations, and that rationale logical and factual accuracy still does not absolutely guarantee answer correctness. Shortly after undergoing a bipolar prosthesis for a displaced femoral neck fracture of the left hip acquired after a fall the day before, an 80-year-old woman suddenly develops dyspnea. The surgery under general anesthesia with sevoflurane was uneventful, lasting 98 min, during which the patient maintained oxygen saturation readings of 100% on 8 l of oxygen. She has a history of hypertension, osteoporosis, and osteoarthritis of her right knee. Her medications include ramipril, naproxen, ranitidine, and a multivitamin. She appears cyanotic, drowsy, and is oriented only to person. Her temperature is 38.6 \u00b0C (101.5 \u00b0F), pulse is 135/min, respirations are 36/min, and blood pressure is 155/95 mm Hg. Pulse oximetry on room air shows an oxygen saturation of 81%. There are several scattered petechiae on the anterior chest wall. Laboratory studies show a hemoglobin concentration of 10.5 g/dl, a leukocyte count of 9000/mm 3 , a platelet count of 145,000/mm 3 , and a creatine kinase of 190 U/l. An ECG shows sinus tachycardia. What is the most likely diagnosis? Example Question 2 A 55-year-old man comes to the emergency department because of a dry cough and severe chest pain beginning that morning. Two months ago, he was diagnosed with inferior wall myocardial infarction and was treated with stent implantation of the right coronary artery. He has a history of hypertension and hypercholesterolemia. His medications include aspirin, clopidogrel, atorvastatin, and enalapril. His temperature is 38.5\u00c2\u00b0C (101.3 \u00b0F), pulse is 92/min, respirations are 22/min, and blood pressure is 130/80 mm Hg. Cardiac examination shows a high-pitched scratching sound best heard while sitting upright and during expiration. The remainder of the examination shows no abnormalities. An ECG shows diffuse ST elevations. Serum studies show a troponin I of 0.005 ng/ml (N < 0.01). What is the most likely cause of this patient's symptoms?\n\nExample questions used in all MEDQA prompts provided in Table  2 .\n\nTo demonstrate how clinical reasoning prompts provide interpretability, we include descriptive MedQA examples (Supplementary Data 4). Incorrect model responses are often accompanied by rationales that provide factual inaccuracy, while logical rationales are more often associated with correct responses. We further quantify this relationship by evaluating 100 GPT-4 diagnostic reasoning rationales, where we found incorrect answers were much more likely to have logic errors in their The prior probability of Dressler Syndrome is 0.01%. The patient has diffuse ST elevations, increasing the probability of Dressler Syndrome to 5%. The patient has a scratching murmur which increases the probability to 10%. In the setting of a recent MI the posterior probability of myocardial infarction is 55%. This patient likely has Dressler Syndrome.\n\nThe traditional and diagnostic CoT prompts evaluated in this study. The provided rationales are in response to the example questions provided in Table  1 .\n\nNote that the full text of the example questions has been omitted for readability.\n\nrationale compared to correct answers. In total, 65% of incorrect answers had false logic statements in their rationale, with an average of 0.82 inaccuracies per rationale. In contrast, only 18% of correct answers had false logic statements in their rationale, with an average of 0.11 per question (Supplementary Data 5). Our results suggest clinical reasoning rationales provide valuable insight (but not an absolute guarantee) into whether an LLM response can be trusted and represent a step toward LLM interpretability.\n\nThe strengths of our investigation are a prompt design that leverages chain-of-thought prompting for insight into LLM clinical reasoning capabilities as well as the use of free response clinical case questions where previous studies have been limited to multiple-choice or simple open-ended fact retrieval that do not challenge LLM clinical reasoning abilities. We designed our evaluation with free response questions both from the USMLE as well as NEJM case report series to facilitate rigorous comparison between prompting strategies.\n\nA limitation of our study is that while our prompt engineering process surveyed a wide range of prompt styles we could not test all possible diagnostic reasoning CoT prompts. Furthermore our investigation was limited to only GPT-3.5 and GPT-4, US-centric question sets, and the English language, therefore we cannot generalize our findings to other available models, especially ones fine-tuned on texts demonstrating clinical reasoning, nor to non-English languages and non-US-centric question sets. We hope that future studies can iterate on our diagnostic reasoning prompts and use our open dataset as a benchmark for additional evaluation."
    },
    {
      "title": "METHODS"
    },
    {
      "title": "LLM prompt development",
      "text": "We used an iterative process known as prompt engineering to develop our diagnostic reasoning prompts. During this process, we experimented with several different types of prompts (Supplementary Note 2). In each round of prompt engineering, we evaluated GPT-3.5 accuracy on the MEDQA training set (Supplementary Data 3). We found prompts that encouraged step-by-step reasoning without specifying what the steps should be, yielded better performance. We also found that prompts that focused on a single diagnostic reasoning strategy provided better results than prompts that combined multiple strategies."
    },
    {
      "title": "LLM response evaluation",
      "text": "Language model responses were evaluated by physician authors AN, ER, RG and TS, three internal medicine attending physicians and one internal medicine resident. Each question was evaluated by two blinded physicians. If there was disagreement in the grade assigned, a third evaluator determined the final grade. Any response that was felt to be equally correct and specific, as compared to the provided answer, was marked as correct. Physicians used UpToDate 23 , MKSAPP  24  , and StatPearls 25 to verify accuracy of answers when needed."
    },
    {
      "title": "LLM programming and computing resources",
      "text": "For this evaluation we used the OpenAI Davinci-003 model via an OpenAI API to provide GPT-3.5 responses and GPT-4 model via an OpenAI API to provide GPT-4 responses. Prompting of the GPT-3.5 model was performed with the Demonstrate-Search-Predict (DSP)\n\nQuestion : A 30-year-old African American woman comes to the physician for the evaluation of a dry cough and chest discomfort for the past 3 days. During this period, the patient has had headaches, muscle aches, joint pain, fever, and chills. Ten days ago, she was hiking with her family in Mississippi. The patient has asthma that is treated with an albuterol inhaler. Her mother has a lung disease treated with methotrexate. The patient has smoked one pack of cigarettes daily for the past 10 years. Her temperature is 38\u00c2\u00b0C (100.4\u00c2\u00b0F). Physical examination shows slight wheezes throughout both lung fields. Laboratory studies and urinalysis are positive for polysaccharide antigen. Bronchoalveolar lavage using silver/PAS-staining shows macrophages filled with a dimorphic fungus with septate hyphae. What is the most likely cause of this patient's symptoms? Answer: Histoplasmosis Traditional Chain-of-Thought (GPT-3.5) 'The patient has a dry cough, chest discomfort, and other symptoms such as fever, chills, headaches, and muscle aches. She has a positive polysaccharide antigen and bronchoalveolar lavage shows a dimorphic fungus with septate hyphae. This patient likely has Valley Fever.' GPT-3.5 Differential Diagnosis CoT (GPT-3.5) 'The differential diagnosis for this patient includes: pneumonia, tuberculosis, eosinophilic pneumonia, hypersensitivity pneumonitis, and coccidioidomycosis. The patient's recent history of hiking in Mississippi and the presence of a dimorphic fungus with septate hyphae on bronchoalveolar lavage make coccidioidomycosis the most likely cause of her symptoms.' GPT-3.5 Intuitive Reasoning CoT (GPT-3.5) 'The patient has a history of asthma, which increases the likelihood of asthma exacerbation. The positive result for polysaccharide antigen suggests atypical pneumonia. The presence of a dimorphic fungus with septate hyphae suggests the presence of fungal pneumonia. This patient most likely has fungal pneumonia.' Analytic Reasoning CoT (GPT-3.5) 'The patient's recent history of hiking in Mississippi and the positive polysaccharide antigen and silver/PAS-staining results strongly suggest fungal pneumonia as the cause of her symptoms.' Bayesian Inference CoT (GPT-3.5) 'The prior probability of blastomycosis is 1%, however the patient's recent travel increases the probability to 5%. The laboratory and urinalysis results increase the posterior probability to 30%. The presence of a dimorphic fungus on bronchoalveolar lavage increases the probability to 60%. This patient is likely suffering from blastomycosis.' Fig.  1  GPT 3.5 CoT and diagnostic reasoning rationale examples. Example GPT-3.5 rationales responding to a traditional CoT prompt as well as diagnostic reasoning prompts. LLM response and rationale results for the entire test set can be found in Supplementary Information 1."
    },
    {
      "text": "Percentage difference and p value statistics compared to traditional chain-of-thought. GPT 4 challenge set performance with differential diagnosis reasoning prompts compared to traditional CoT. 2% (-11.4%, +2.1%) 0.09 GPT-4 performance on the NEJM challenge question set with both traditional chain-of-thought and differential diagnosis reasoning prompting."
    },
    {
      "text": "Fig. 3 Proposed LLM workflow. a Current LLM workflow. b Proposed LLM workflow."
    },
    {
      "text": "Example MedQA questions."
    },
    {
      "text": "CoT and diagnostic reasoning prompts.Traditional CoT reasoning prompt Traditional chain-of-thought (CoT) Prompt:Provide a step-by-step deduction that identifies the correct response {Example Question 1} Example Rationale 1:The patient had a surgical repair of a displaced femoral neck fracture.The patient has petechiae.The patient has a new oxygen requirement, meaning they are having difficulty with their breathing.This patient most likely has a fat embolism.This patient has shortness of breath after a long bone surgery.The differential for this patient is pulmonary embolism, fat embolism, myocardial infarction, blood loss, anaphylaxis, or a drug reaction.The patient has petechiae which makes fat embolism more likely.This patient most likely has a fat embolism.This patient has chest pain with diffuse ST elevations after a recent myocardial infarction.The differential for this patient includes: myocardial infarction, pulmonary embolism, pericarditis, Dressler syndrome, aortic dissection, and costochondritis.This patient likely has a high-pitched scratching sound on auscultation associated with pericarditis and Dressler Syndrome.This patient has diffuse ST elevations associated with Dressler Syndrome.This patient most likely has Dressler Syndrome.Intuitive reasoning CoTPrompt: Use symptom, signs, and laboratory disease associations to step by step deduce the correct response.This patient had a recent myocardial infarction which can cause myocardial inflammation that causes pericarditis and Dressler Syndrome.The diffuse ST elevations and high pitched scratching murmur can be signs of pericardial inflammation as the inflamed pericardium rubs against the pleura as seen with Dressler Syndrome.This patient likely has Dressler Syndrome.Bayesian reasoning CoTPrompt:Use step-by-step Bayesian Inference to create a prior probability that is updated with new information in the history to produce a posterior probability and determine the final diagnosis.The prior probability of fat embolism is 0.05% however the patient has petechiae on exam which is seen with fat emboli, which increases the posterior probability of fat embolism to 5%. Altered mental status increases the probability further to 10%. Recent orthopedic surgery increases the probability of fat emboli syndrome to 60%. This patient most likely has a fat embolism."
    },
    {
      "text": "GPT 3.5 MEDQA performance with diagnostic reasoning prompts compared to traditional CoT..5 performance on a free-response MEDQA question set with both traditional chain-of-thought model prompting strategies as well as clinical reasoning prompts of intuitive reasoning, analytic reasoning, differential diagnosis and Bayesian inference."
    },
    {
      "text": "GPT 4 MEDQA performance with diagnostic reasoning prompts compared to traditional CoT. performance on a free-response MEDQA question set with both traditional chain-of-thought model prompting strategies as well as clinical reasoning prompts of intuitive reasoning, analytic reasoning, differential diagnosis and Bayesian inference."
    },
    {
      "text": "ACKNOWLEDGEMENTS J.H.C. has received research funding support in part by the  NIH/National Institute of Allergy and Infectious Diseases  ( 1R01AI17812101 ),  NIH/National Institute on Drug Abuse Clinical Trials Network  ( UG1DA015815-CTN-0136 ),  Gordon and Betty Moore Foundation  (Grant # 12409 ),  Stanford Artificial Intelligence in Medicine and Imaging- Human-Centered Artificial Intelligence (AIMI-HAI ) Partnership Grant,  Google Inc . Research collaboration,  American Heart Association- Strategically Focused Research Network-Diversity in Clinical Trials , and the  NIH-NCATS-CTSA  grant ( UL1TR003142 ) for common research resources. R.G. is supported by a  VA Advanced Fellowship in Medical Informatics . The views expressed are those of the authors and not necessarily those of the  Department of Veterans Affairs  or those of the  United States Government ."
    },
    {
      "title": "DATA AVAILABILITY",
      "text": "All data used in this manuscript are provided in our Supplementary Information and open access figshare (10.6084/m9.figshare.24886593). This includes all prompts, LLM responses and reviewer grades."
    },
    {
      "title": "CODE AVAILABILITY",
      "text": "All code used in this manuscript is provided in our Supplementary Information and open access figshare (10.6084/m9.figshare.24886593)."
    },
    {
      "text": "Python module  26, 27  . Self-consistency was applied all GPT-3.5 Chain-of-Thought prompts  28  . GPT-4 responses did not use DSP or self-consistency because those features were not available for GPT-4 at the time of submission. Computing was performed in a Google CoLab Jupyter Notebook. Full code can be found in Supplementary Note 3."
    },
    {
      "title": "Statistical evaluation",
      "text": "Statistical significance and confidence intervals were calculated against traditional CoT using McNemar's test for paired proportions, two-tailed. Statistical significance was set at an alpha of 0.0125 to reflect multiple hypotheses (four prompts per each model) by the Bonferroni Correction. Inter-rater agreement was assessed using Cohen's Kappa Statistic. Statistical analysis was performed in R with the epibasix library."
    },
    {
      "title": "Clinical reasoning rationale logic evaluation",
      "text": "The first 100 GPT-4 differential diagnosis rationales were evaluated for appropriate logic and medical accuracy. The rationales were evaluated by physician authors RG and TS, who are both internal medicine attending physicians. The reviewers attempted to identify instances of inaccuracy or false logic in each diagnostic reasoning rationale, blinded to the index question, gold standard answer, or grade of the LLM response. Reviewers were blinded to the index question to simulate a clinical situation where a physician is evaluating an LLM case interpretation without examining the patient themselves. Arguments with false logic or inaccuracies were tallied and a comparison was made between rationales supporting correct versus incorrect answers. Complete data can be found in Supplementary Data 5."
    },
    {
      "title": "AUTHOR CONTRIBUTIONS",
      "text": "T.S.: manuscript writing, LLM response review, conceptual design. A.N.: manuscript writing, LLM response review. R.G.: manuscript writing, LLM response review. E.R.: manuscript writing, LLM response review. J.H.C.: manuscript writing, conceptual design."
    },
    {
      "title": "COMPETING INTERESTS",
      "text": "The authors declare no competing interests."
    },
    {
      "title": "ADDITIONAL INFORMATION Supplementary information",
      "text": "The online version contains supplementary material available at  https://doi.org/10.1038/s41746-024-01010-1 .\n\nCorrespondence and requests for materials should be addressed to Thomas Savage.\n\nReprints and permission information is available at  http://www.nature.com/  reprints  Publisher's note Springer Nature remains neutral with regard to jurisdictional claims in published maps and institutional affiliations."
    }
  ],
  "references": [
    {
      "title": "Large language models in medicine",
      "authors": [
        "A Thirunavukarasu"
      ],
      "year": 2023,
      "doi": "10.1038/s41591-023-02448-8",
      "journal": "Nat. Med",
      "volume": "29",
      "raw": "Large language models in medicine \n\t\t \n\t\t\t A J Thirunavukarasu \n\t\t \n\t\t 10.1038/s41591-023-02448-8 \n\t \n\t \n\t\t Nat. Med \n\t\t \n\t\t\t 29 \n\t\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Thirunavukarasu, A. J. et al. Large language models in medicine. Nat. Med. 29, 1-11 (2023)."
    },
    {
      "title": "Benefits, limits, and risks of GPT-4 as an AI chatbot for medicine",
      "authors": [
        "P Lee",
        "S Bubeck",
        "J Petro"
      ],
      "year": 2023,
      "journal": "N. Engl. J. Med",
      "volume": "388",
      "raw": "Benefits, limits, and risks of GPT-4 as an AI chatbot for medicine \n\t\t \n\t\t\t P Lee \n\t\t \n\t\t \n\t\t\t S Bubeck \n\t\t \n\t\t \n\t\t\t J Petro \n\t\t \n\t \n\t \n\t\t N. Engl. J. Med \n\t\t \n\t\t\t 388 \n\t\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Lee, P., Bubeck, S. & Petro, J. Benefits, limits, and risks of GPT-4 as an AI chatbot for medicine. N. Engl. J. Med. 388, 2399-2400 (2023)."
    },
    {
      "title": "Comparison of history of present illness summaries generated by a chatbot and senior internal medicine residents",
      "authors": [
        "A Nayak"
      ],
      "year": 2023,
      "doi": "10.1001/jamainternmed.2023.2561",
      "journal": "JAMA Intern. Med",
      "volume": "183",
      "pages": "232561",
      "raw": "Comparison of history of present illness summaries generated by a chatbot and senior internal medicine residents \n\t\t \n\t\t\t A Nayak \n\t\t \n\t\t 10.1001/jamainternmed.2023.2561 \n\t \n\t \n\t\t JAMA Intern. Med \n\t\t \n\t\t\t 183 \n\t\t\t 232561 \n\t\t\t 2023 \n\t\t \n\t \n\t Nayak, A. et al. Comparison of history of present illness summaries generated by a chatbot and senior internal medicine residents. JAMA Intern. Med. 183, e232561 (2023)."
    },
    {
      "title": "Performance of ChatGPT on USMLE: potential for AI-assisted medical education using large language models",
      "authors": [
        "T Kung"
      ],
      "year": 2023,
      "doi": "10.1371/journal.pdig.0000198",
      "journal": "PLoS Digit. Health",
      "volume": "2",
      "pages": "198",
      "raw": "Performance of ChatGPT on USMLE: potential for AI-assisted medical education using large language models \n\t\t \n\t\t\t T H Kung \n\t\t \n\t\t 10.1371/journal.pdig.0000198 \n\t \n\t \n\t\t PLoS Digit. Health \n\t\t \n\t\t\t 2 \n\t\t\t 198 \n\t\t\t 2023 \n\t\t \n\t \n\t Kung, T. H. et al. Performance of ChatGPT on USMLE: potential for AI-assisted medical education using large language models. PLoS Digit. Health 2, e0000198 (2023)."
    },
    {
      "title": "Comparing physician and artificial intelligence chatbot responses to patient questions posted to a public social media forum",
      "authors": [
        "J Ayers"
      ],
      "year": 2023,
      "doi": "10.1001/jamainternmed.2023.1838",
      "journal": "JAMA Intern. Med",
      "volume": "183",
      "raw": "Comparing physician and artificial intelligence chatbot responses to patient questions posted to a public social media forum \n\t\t \n\t\t\t J W Ayers \n\t\t \n\t\t 10.1001/jamainternmed.2023.1838 \n\t \n\t \n\t\t JAMA Intern. Med \n\t\t \n\t\t\t 183 \n\t\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Ayers, J. W. et al. Comparing physician and artificial intelligence chatbot responses to patient questions posted to a public social media forum. JAMA Intern. Med. 183, 589-596 (2023)."
    },
    {
      "title": "Appropriateness of cardiovascular disease prevention recommendations obtained from a popular online chat-based artificial intelligence model",
      "authors": [
        "A Sarraju"
      ],
      "year": 2023,
      "doi": "10.1001/jama.2023.1044",
      "journal": "JAMA",
      "volume": "329",
      "raw": "Appropriateness of cardiovascular disease prevention recommendations obtained from a popular online chat-based artificial intelligence model \n\t\t \n\t\t\t A Sarraju \n\t\t \n\t\t 10.1001/jama.2023.1044 \n\t \n\t \n\t\t JAMA \n\t\t \n\t\t\t 329 \n\t\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Sarraju, A. et al. Appropriateness of cardiovascular disease prevention recom- mendations obtained from a popular online chat-based artificial intelligence model. JAMA 329, 842-844 (2023)."
    },
    {
      "title": "Large language models encode clinical knowledge",
      "authors": [
        "K Singhal"
      ],
      "year": 2023,
      "doi": "10.1038/s41586-023-06291-2",
      "journal": "Nature",
      "volume": "620",
      "raw": "Large language models encode clinical knowledge \n\t\t \n\t\t\t K Singhal \n\t\t \n\t\t 10.1038/s41586-023-06291-2 \n\t \n\t \n\t\t Nature \n\t\t \n\t\t\t 620 \n\t\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Singhal, K. et al. Large language models encode clinical knowledge. Nature 620, 172-180 (2023)."
    },
    {
      "title": "Towards expert-level medical question answering with large language models",
      "authors": [
        "K Singhal"
      ],
      "year": 2023,
      "doi": "10.48550/arXiv.2305.09617",
      "raw": "Towards expert-level medical question answering with large language models \n\t\t \n\t\t\t K Singhal \n\t\t \n\t\t 10.48550/arXiv.2305.09617 \n\t\t \n\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Preprint at \n\t Singhal, K. et al. Towards expert-level medical question answering with large language models. Preprint at https://doi.org/10.48550/arXiv.2305.09617 (2023)."
    },
    {
      "title": "Capabilities of GPT-4 on medical challenge problems",
      "authors": [
        "H Nori",
        "N King",
        "S Mckinney",
        "D Carignan",
        "E Horvitz"
      ],
      "year": 2023,
      "doi": "10.48550/arXiv.2303.13375",
      "raw": "Capabilities of GPT-4 on medical challenge problems \n\t\t \n\t\t\t H Nori \n\t\t \n\t\t \n\t\t\t N King \n\t\t \n\t\t \n\t\t\t S M Mckinney \n\t\t \n\t\t \n\t\t\t D Carignan \n\t\t \n\t\t \n\t\t\t E Horvitz \n\t\t \n\t\t 10.48550/arXiv.2303.13375 \n\t\t \n\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Preprint at \n\t Nori, H., King, N., McKinney, S. M., Carignan, D. & Horvitz, E. Capabilities of GPT-4 on medical challenge problems. Preprint at https://doi.org/10.48550/arXiv.2303.13375 (2023)."
    },
    {
      "title": "Performance of ChatGPT and GPT-4 on neurosurgery written board examinations",
      "authors": [
        "R Ali"
      ],
      "year": 2023,
      "doi": "10.1227/neu.0000000000002632",
      "journal": "Neurosurgery",
      "volume": "93",
      "raw": "Performance of ChatGPT and GPT-4 on neurosurgery written board examinations \n\t\t \n\t\t\t R Ali \n\t\t \n\t\t 10.1227/neu.0000000000002632 \n\t \n\t \n\t\t Neurosurgery \n\t\t \n\t\t\t 93 \n\t\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Ali, R. et al. Performance of ChatGPT and GPT-4 on neurosurgery written board examinations. Neurosurgery. 93, 1353-1365 (2023)."
    },
    {
      "title": "Performance of ChatGPT, GPT-4, and Google Bard on a neurosurgery oral boards preparation question bank",
      "authors": [
        "R Ali"
      ],
      "year": 2023,
      "journal": "Neurosurgery",
      "volume": "93",
      "raw": "Performance of ChatGPT, GPT-4, and Google Bard on a neurosurgery oral boards preparation question bank \n\t\t \n\t\t\t R Ali \n\t\t \n\t \n\t \n\t\t Neurosurgery \n\t\t \n\t\t\t 93 \n\t\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Ali, R. et al. Performance of ChatGPT, GPT-4, and Google Bard on a neurosurgery oral boards preparation question bank. Neurosurgery. 93, 1090-1098 (2023)."
    },
    {
      "title": "Chatbot vs medical student performance on free-response clinical reasoning examinations",
      "authors": [
        "E Strong"
      ],
      "year": 2023,
      "doi": "10.1001/jamainternmed.2023.2909",
      "journal": "JAMA Intern. Med",
      "volume": "183",
      "raw": "Chatbot vs medical student performance on free-response clinical reasoning examinations \n\t\t \n\t\t\t E Strong \n\t\t \n\t\t 10.1001/jamainternmed.2023.2909 \n\t \n\t \n\t\t JAMA Intern. Med \n\t\t \n\t\t\t 183 \n\t\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Strong, E. et al. Chatbot vs medical student performance on free-response clinical reasoning examinations. JAMA Intern. Med. 183, 1028-1030 (2023)."
    },
    {
      "title": "Accuracy of a generative artificial intelligence model in a complex diagnostic challenge",
      "authors": [
        "Z Kanjee",
        "B Crowe",
        "A Rodman"
      ],
      "year": 2023,
      "doi": "10.1001/jama.2023.8288",
      "journal": "JAMA",
      "volume": "330",
      "raw": "Accuracy of a generative artificial intelligence model in a complex diagnostic challenge \n\t\t \n\t\t\t Z Kanjee \n\t\t \n\t\t \n\t\t\t B Crowe \n\t\t \n\t\t \n\t\t\t A Rodman \n\t\t \n\t\t 10.1001/jama.2023.8288 \n\t \n\t \n\t\t JAMA \n\t\t \n\t\t\t 330 \n\t\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Kanjee, Z., Crowe, B. & Rodman, A. Accuracy of a generative artificial intelligence model in a complex diagnostic challenge. JAMA 330, 78-80 (2023)."
    },
    {
      "title": "Language models are few-shot learners",
      "authors": [
        "T Brown"
      ],
      "raw": "Language models are few-shot learners \n\t\t \n\t\t\t T B Brown \n\t\t \n\t \n\t \n\t\t Proc. of the 34th International Conference on Neural Information Processing Systems (NIPS'20) \n\t\t of the 34th International Conference on Neural Information essing Systems (NIPS'20) \n\t\t \n\t\t\t \n\t\t \n\t \n\t Brown, T. B. et al. Language models are few-shot learners. In Proc. of the 34th International Conference on Neural Information Processing Systems (NIPS'20). 159, 1877-1901 ("
    },
    {
      "title": "Instruction tuning with GPT-4",
      "authors": [
        "B Peng",
        "C Li",
        "P He",
        "M Galley",
        "J Gao"
      ],
      "year": 2023,
      "raw": "B Peng \n\t\t \n\t\t \n\t\t\t C Li \n\t\t \n\t\t \n\t\t\t P He \n\t\t \n\t\t \n\t\t\t M Galley \n\t\t \n\t\t \n\t\t\t J Gao \n\t\t \n\t\t \n\t\t Instruction tuning with GPT-4 \n\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Peng, B., Li, C., He, P., Galley, M. & Gao, J. Instruction tuning with GPT-4. Preprint at http://arxiv.org/abs/2304.03277 (2023)."
    },
    {
      "title": "Prompt engineering for healthcare: methodologies and applications",
      "authors": [
        "J Wang"
      ],
      "year": 2023,
      "doi": "10.48550/arXiv.2304.14670",
      "raw": "Prompt engineering for healthcare: methodologies and applications \n\t\t \n\t\t\t J Wang \n\t\t \n\t\t 10.48550/arXiv.2304.14670 \n\t\t \n\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Preprint at \n\t Wang, J. et al. Prompt engineering for healthcare: methodologies and applica- tions. Preprint at https://doi.org/10.48550/arXiv.2304.14670 (2023)."
    },
    {
      "title": "Chain-of-thought prompting elicits reasoning in large language models",
      "authors": [
        "J Wei"
      ],
      "year": 2023,
      "raw": "Chain-of-thought prompting elicits reasoning in large language models \n\t\t \n\t\t\t J Wei \n\t\t \n\t\t \n\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Preprint at \n\t Wei, J. et al. Chain-of-thought prompting elicits reasoning in large language models. Preprint at http://arxiv.org/abs/2201.11903 (2023)."
    },
    {
      "title": "Let's verify step by step",
      "authors": [
        "H Lightman"
      ],
      "year": 2023,
      "raw": "Let's verify step by step \n\t\t \n\t\t\t H Lightman \n\t\t \n\t\t \n\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Preprint at \n\t Lightman, H. et al. Let's verify step by step. Preprint at http://arxiv.org/abs/ 2305.20050 (2023)."
    },
    {
      "title": "OpenAI GPT-3.5 API",
      "year": 2023,
      "raw": "OpenAI GPT-3.5 API \n\t\t \n\t\t\t Openai \n\t\t \n\t\t \n\t \n\t \n\t\t GPT-4 API \n\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t text-davinci-003 \n\t OpenAI. 2023. OpenAI GPT-3.5 API [text-davinci-003] and GPT-4 API. Available at: https://platform.openai.com."
    },
    {
      "title": "What disease does this patient have? A large-scale open domain question answering dataset from medical exams",
      "authors": [
        "D Jin"
      ],
      "year": 2020,
      "doi": "10.48550/arXiv.2009.13081",
      "raw": "What disease does this patient have? A large-scale open domain question answering dataset from medical exams \n\t\t \n\t\t\t D Jin \n\t\t \n\t\t 10.48550/arXiv.2009.13081 \n\t\t \n\t\t \n\t\t\t 2020 \n\t\t \n\t \n\t Jin, D. et al. What disease does this patient have? A large-scale open domain question answering dataset from medical exams. Preprint at https://doi.org/ 10.48550/arXiv.2009.13081 (2020)."
    },
    {
      "title": "Case records of the Massachusetts General Hospital articles",
      "year": 2020,
      "doi": "10.1515/9783110668957-002",
      "raw": "Case records of the Massachusetts General Hospital articles \n\t\t 10.1515/9783110668957-002 \n\t\t \n\t\t\t 2020-2023 \n\t\t \n\t \n\t Case records of the Massachusetts General Hospital articles. 2020-2023."
    },
    {
      "year": 2023,
      "doi": "10.1056/nejm199312023292328",
      "journal": "N. Engl. J. Med. Accessed",
      "raw": "10.1056/nejm199312023292328 \n\t\t \n\t \n\t \n\t\t N. Engl. J. Med. Accessed \n\t\t \n\t\t\t May 2023 \n\t\t \n\t \n\t N. Engl. J. Med. Accessed: May 2023. https://www.nejm.org/medical-articles/case-records- of-the-massachusetts-general-hospital."
    },
    {
      "title": "Explainable artificial intelligence for mental health through transparency and interpretability for understandability",
      "authors": [
        "D Joyce",
        "A Kormilitzin",
        "K Smith",
        "A Cipriani"
      ],
      "year": 2023,
      "journal": "Npj Digital Med",
      "volume": "6",
      "raw": "Explainable artificial intelligence for mental health through transparency and interpretability for understandability \n\t\t \n\t\t\t D W Joyce \n\t\t \n\t\t \n\t\t\t A Kormilitzin \n\t\t \n\t\t \n\t\t\t K A Smith \n\t\t \n\t\t \n\t\t\t A Cipriani \n\t\t \n\t \n\t \n\t\t Npj Digital Med \n\t\t \n\t\t\t 6 \n\t\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Joyce, D. W., Kormilitzin, A., Smith, K. A. & Cipriani, A. Explainable artificial intel- ligence for mental health through transparency and interpretability for under- standability. Npj Digital Med. 6, 1-7 (2023)."
    },
    {
      "title": "UpToDate: industry-leading clinical decision support",
      "year": 2023,
      "doi": "10.1097/01.cot.0000931980.25807.1f",
      "raw": "10.1097/01.cot.0000931980.25807.1f \n\t\t \n\t\t UpToDate: industry-leading clinical decision support \n\t\t \n\t\t\t Wolters Kluwer \n\t\t\t June 2023 \n\t\t \n\t \n\t UpToDate: industry-leading clinical decision support. Wolters Kluwer. Accessed: June 2023. https://www.wolterskluwer.com/en/solutions/uptodate."
    },
    {
      "doi": "10.1097/00019616-199104000-00019",
      "journal": "MKSAP",
      "volume": "19",
      "raw": "10.1097/00019616-199104000-00019 \n\t \n\t \n\t\t MKSAP \n\t\t \n\t\t\t 19 \n\t\t \n\t \n\t MKSAP 19"
    },
    {
      "title": "NCBI Bookshelf",
      "year": 2023,
      "raw": "NCBI Bookshelf \n\t\t \n\t\t\t Statpearls \n\t\t \n\t\t \n\t\t \n\t\t\t June 2023 \n\t\t \n\t \n\t StatPearls. NCBI Bookshelf. Accessed: June 2023. https://www.statpearls.com/."
    },
    {
      "title": "DSP: The Demonstrate-Search-Predict Framework",
      "year": 2023,
      "doi": "10.17504/protocols.io.fskbncw",
      "raw": "10.17504/protocols.io.fskbncw \n\t\t \n\t\t DSP: The Demonstrate-Search-Predict Framework \n\t\t \n\t\t\t March 2023 \n\t\t \n\t \n\t GitHub -stanfordnlp/dspy at v1 \n\t DSP: The Demonstrate-Search-Predict Framework. Accessed: March 2023. GitHub -stanfordnlp/dspy at v1. https://github.com/stanfordnlp/dspy/tree/v1."
    },
    {
      "title": "Demonstrate-Search-Predict: composing retrieval and language models for knowledge-intensive NLP",
      "authors": [
        "O Khattab"
      ],
      "year": 2023,
      "raw": "Demonstrate-Search-Predict: composing retrieval and language models for knowledge-intensive NLP \n\t\t \n\t\t\t O Khattab \n\t\t \n\t\t \n\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Khattab, O. et al. Demonstrate-Search-Predict: composing retrieval and language models for knowledge-intensive NLP. Preprint at http://arxiv.org/abs/2212.14024 (2023)."
    },
    {
      "title": "Self-consistency improves chain of thought reasoning in language models",
      "authors": [
        "X Wang"
      ],
      "year": 2023,
      "doi": "10.48550/arXiv.2203.11171",
      "raw": "Self-consistency improves chain of thought reasoning in language models \n\t\t \n\t\t\t X Wang \n\t\t \n\t\t 10.48550/arXiv.2203.11171 \n\t\t \n\t\t \n\t\t\t 2023 \n\t\t \n\t \n\t Preprint at \n\t Wang, X. et al. Self-consistency improves chain of thought reasoning in language models. Preprint at https://doi.org/10.48550/arXiv.2203.11171 (2023)."
    }
  ],
  "num_references": 29,
  "figures": [
    {
      "caption": "aTable 5 .",
      "description": "Percentage difference and p value statistics compared to traditional chain-of-thought. GPT 4 challenge set performance with differential diagnosis reasoning prompts compared to traditional CoT. 2% (-11.4%, +2.1%) 0.09 GPT-4 performance on the NEJM challenge question set with both traditional chain-of-thought and differential diagnosis reasoning prompting."
    },
    {
      "caption": "Fig. 3",
      "description": "Fig. 3 Proposed LLM workflow. a Current LLM workflow. b Proposed LLM workflow."
    },
    {
      "type": "table",
      "caption": "Table 1 .",
      "description": "Example MedQA questions."
    },
    {
      "type": "table",
      "caption": "Table 2 .",
      "description": "CoT and diagnostic reasoning prompts.Traditional CoT reasoning prompt Traditional chain-of-thought (CoT) Prompt:Provide a step-by-step deduction that identifies the correct response {Example Question 1} Example Rationale 1:The patient had a surgical repair of a displaced femoral neck fracture.The patient has petechiae.The patient has a new oxygen requirement, meaning they are having difficulty with their breathing.This patient most likely has a fat embolism.This patient has shortness of breath after a long bone surgery.The differential for this patient is pulmonary embolism, fat embolism, myocardial infarction, blood loss, anaphylaxis, or a drug reaction.The patient has petechiae which makes fat embolism more likely.This patient most likely has a fat embolism.This patient has chest pain with diffuse ST elevations after a recent myocardial infarction.The differential for this patient includes: myocardial infarction, pulmonary embolism, pericarditis, Dressler syndrome, aortic dissection, and costochondritis.This patient likely has a high-pitched scratching sound on auscultation associated with pericarditis and Dressler Syndrome.This patient has diffuse ST elevations associated with Dressler Syndrome.This patient most likely has Dressler Syndrome.Intuitive reasoning CoTPrompt: Use symptom, signs, and laboratory disease associations to step by step deduce the correct response.This patient had a recent myocardial infarction which can cause myocardial inflammation that causes pericarditis and Dressler Syndrome.The diffuse ST elevations and high pitched scratching murmur can be signs of pericardial inflammation as the inflamed pericardium rubs against the pleura as seen with Dressler Syndrome.This patient likely has Dressler Syndrome.Bayesian reasoning CoTPrompt:Use step-by-step Bayesian Inference to create a prior probability that is updated with new information in the history to produce a posterior probability and determine the final diagnosis.The prior probability of fat embolism is 0.05% however the patient has petechiae on exam which is seen with fat emboli, which increases the posterior probability of fat embolism to 5%. Altered mental status increases the probability further to 10%. Recent orthopedic surgery increases the probability of fat emboli syndrome to 60%. This patient most likely has a fat embolism."
    },
    {
      "type": "table",
      "caption": "Table 3 .",
      "description": "GPT 3.5 MEDQA performance with diagnostic reasoning prompts compared to traditional CoT..5 performance on a free-response MEDQA question set with both traditional chain-of-thought model prompting strategies as well as clinical reasoning prompts of intuitive reasoning, analytic reasoning, differential diagnosis and Bayesian inference."
    },
    {
      "type": "table",
      "caption": "Table 4 .",
      "description": "GPT 4 MEDQA performance with diagnostic reasoning prompts compared to traditional CoT. performance on a free-response MEDQA question set with both traditional chain-of-thought model prompting strategies as well as clinical reasoning prompts of intuitive reasoning, analytic reasoning, differential diagnosis and Bayesian inference."
    }
  ],
  "num_figures": 6,
  "tables": [
    {
      "content": "Example Question 1"
    },
    {
      "content": "{Example Question 2} Example Rationale 2: This patient is having chest pain. They recently had a heart attack and has new chest pain, suggesting he may have a problem with his heart. The EKG has diffuse ST elevations and he has a scratching murmur. This patient likely has Dressler Syndrome. Clinical reasoning prompts Differential diagnosis CoT Prompt: Use step by step deduction to create a differential diagnosis and then use step by step deduction to determine the correct response. {Example Question 1} Example Rationale 1: {Example Question 2} Example Rationale 2: {Example Question 2} Example Rationale 2: {Example Question 1} Example Rationale 1: {Example Question 2} Example Rationale 2:"
    },
    {
      "content": "Prompt Correct responses (%) Difference in percentage (confidence interval) p value a Chain of thought 46% - - Intuitive reasoning 48% 1.7% (-2.5%, 5.9%) 0.4 Analytic reasoning 40% -6.0% (-11%, -1.5%) 0.001 Differential diagnosis 38% -8.9% (-14%, -3.4%) <0.001 Bayesian inference 42% -4.4% (-9.1%, 0.2%) 0.02 GPT-3"
    },
    {
      "content": "Prompt Correct responses (%) Difference in percentage (confidence interval) p value a Chain of thought 76% - - Intuitive reasoning 77% 0.8% (-3.6%, 5.2%) 0.73 Analytic reasoning 78% 1.6% (-2.4%, 5.6%) 0.35 Differential diagnosis 78% 2.2% (-2.3%, 6.7%) 0.24 Bayesian inference 72% -3.4% (-9.1%, 1.2%) 0.07 GPT-4"
    }
  ],
  "num_tables": 4,
  "num_citations": 30,
  "cited_references": [
    "b3",
    "b13",
    "b18",
    "b2",
    "b14",
    "b17",
    "b9",
    "b1",
    "b20",
    "b12",
    "b16",
    "b15",
    "b5",
    "b19",
    "b28",
    "b10",
    "b27",
    "b24",
    "b4",
    "b7",
    "b11",
    "b8",
    "b22",
    "b6",
    "b0",
    "b26"
  ],
  "notes": [
    "[raw_affiliation] 1  Department of Medicine , Stanford University , Stanford , CA , USA.",
    "[raw_affiliation] 2  Division of Hospital Medicine , Stanford University , Stanford , CA , USA.",
    "[raw_affiliation] 1  Department of Medicine , Stanford University , Stanford , CA , USA.",
    "[raw_affiliation] 2  Division of Hospital Medicine , Stanford University , Stanford , CA , USA.",
    "[raw_affiliation] 3  Palo Alto Veterans Affairs Medical Center , Palo Alto , CA , USA.",
    "[raw_affiliation] 4  Department of Health Policy , Stanford University , Stanford , CA , USA.",
    "[raw_affiliation] 1  Department of Medicine , Stanford University , Stanford , CA , USA.",
    "[raw_affiliation] 1  Department of Medicine , Stanford University , Stanford , CA , USA.",
    "[raw_affiliation] 2  Division of Hospital Medicine , Stanford University , Stanford , CA , USA.",
    "[raw_affiliation] 5  Stanford Center for Biomedical Informatics Research , Stanford University , Stanford , CA , USA.",
    "[raw_affiliation] 6  Clinical Excellence Research Center , Stanford University , Stanford , CA , USA.",
    "[submission] Received: 14 August 2023; Accepted: 10 January 2024;",
    "a Percentage difference and p value statistics compared to traditional chain-of-thought.",
    "npj Digital Medicine (2024) 20 Published in partnership with Seoul National University Bundang Hospital 1234567890():,;",
    "Published in partnership with Seoul National University Bundang Hospital npj Digital Medicine (2024) 20",
    "npj Digital Medicine (2024) 20  Published in partnership with Seoul National University Bundang Hospital",
    "[raw_reference] Thirunavukarasu, A. J. et al. Large language models in medicine. Nat. Med. 29, 1-11 (2023).",
    "[raw_reference] Lee, P., Bubeck, S. & Petro, J. Benefits, limits, and risks of GPT-4 as an AI chatbot for medicine. N. Engl. J. Med. 388, 2399-2400 (2023).",
    "[raw_reference] Nayak, A. et al. Comparison of history of present illness summaries generated by a chatbot and senior internal medicine residents. JAMA Intern. Med. 183, e232561 (2023).",
    "[raw_reference] Kung, T. H. et al. Performance of ChatGPT on USMLE: potential for AI-assisted medical education using large language models. PLoS Digit. Health 2, e0000198 (2023).",
    "[raw_reference] Ayers, J. W. et al. Comparing physician and artificial intelligence chatbot responses to patient questions posted to a public social media forum. JAMA Intern. Med. 183, 589-596 (2023).",
    "[raw_reference] Sarraju, A. et al. Appropriateness of cardiovascular disease prevention recom- mendations obtained from a popular online chat-based artificial intelligence model. JAMA 329, 842-844 (2023).",
    "[raw_reference] Singhal, K. et al. Large language models encode clinical knowledge. Nature 620, 172-180 (2023).",
    "[report_type] Preprint at",
    "[raw_reference] Singhal, K. et al. Towards expert-level medical question answering with large language models. Preprint at https://doi.org/10.48550/arXiv.2305.09617 (2023).",
    "[report_type] Preprint at",
    "[raw_reference] Nori, H., King, N., McKinney, S. M., Carignan, D. & Horvitz, E. Capabilities of GPT-4 on medical challenge problems. Preprint at https://doi.org/10.48550/arXiv.2303.13375 (2023).",
    "[raw_reference] Ali, R. et al. Performance of ChatGPT and GPT-4 on neurosurgery written board examinations. Neurosurgery. 93, 1353-1365 (2023).",
    "[raw_reference] Ali, R. et al. Performance of ChatGPT, GPT-4, and Google Bard on a neurosurgery oral boards preparation question bank. Neurosurgery. 93, 1090-1098 (2023).",
    "[raw_reference] Strong, E. et al. Chatbot vs medical student performance on free-response clinical reasoning examinations. JAMA Intern. Med. 183, 1028-1030 (2023).",
    "[raw_reference] Kanjee, Z., Crowe, B. & Rodman, A. Accuracy of a generative artificial intelligence model in a complex diagnostic challenge. JAMA 330, 78-80 (2023).",
    "[raw_reference] Brown, T. B. et al. Language models are few-shot learners. In Proc. of the 34th International Conference on Neural Information Processing Systems (NIPS'20). 159, 1877-1901 (",
    "[raw_reference] Peng, B., Li, C., He, P., Galley, M. & Gao, J. Instruction tuning with GPT-4. Preprint at http://arxiv.org/abs/2304.03277 (2023).",
    "[report_type] Preprint at",
    "[raw_reference] Wang, J. et al. Prompt engineering for healthcare: methodologies and applica- tions. Preprint at https://doi.org/10.48550/arXiv.2304.14670 (2023).",
    "[report_type] Preprint at",
    "[raw_reference] Wei, J. et al. Chain-of-thought prompting elicits reasoning in large language models. Preprint at http://arxiv.org/abs/2201.11903 (2023).",
    "[report_type] Preprint at",
    "[raw_reference] Lightman, H. et al. Let's verify step by step. Preprint at http://arxiv.org/abs/ 2305.20050 (2023).",
    "text-davinci-003",
    "[raw_reference] OpenAI. 2023. OpenAI GPT-3.5 API [text-davinci-003] and GPT-4 API. Available at: https://platform.openai.com.",
    "[raw_reference] Jin, D. et al. What disease does this patient have? A large-scale open domain question answering dataset from medical exams. Preprint at https://doi.org/ 10.48550/arXiv.2009.13081 (2020).",
    "[raw_reference] Case records of the Massachusetts General Hospital articles. 2020-2023.",
    "[raw_reference] N. Engl. J. Med. Accessed: May 2023. https://www.nejm.org/medical-articles/case-records- of-the-massachusetts-general-hospital.",
    "[raw_reference] Joyce, D. W., Kormilitzin, A., Smith, K. A. & Cipriani, A. Explainable artificial intel- ligence for mental health through transparency and interpretability for under- standability. Npj Digital Med. 6, 1-7 (2023).",
    "[raw_reference] UpToDate: industry-leading clinical decision support. Wolters Kluwer. Accessed: June 2023. https://www.wolterskluwer.com/en/solutions/uptodate.",
    "[raw_reference] MKSAP 19",
    "[raw_reference] StatPearls. NCBI Bookshelf. Accessed: June 2023. https://www.statpearls.com/.",
    "GitHub -stanfordnlp/dspy at v1",
    "[raw_reference] DSP: The Demonstrate-Search-Predict Framework. Accessed: March 2023. GitHub -stanfordnlp/dspy at v1. https://github.com/stanfordnlp/dspy/tree/v1.",
    "[raw_reference] Khattab, O. et al. Demonstrate-Search-Predict: composing retrieval and language models for knowledge-intensive NLP. Preprint at http://arxiv.org/abs/2212.14024 (2023).",
    "[report_type] Preprint at",
    "[raw_reference] Wang, X. et al. Self-consistency improves chain of thought reasoning in language models. Preprint at https://doi.org/10.48550/arXiv.2203.11171 (2023)."
  ],
  "processing_software": {
    "GROBID": "0.8.2"
  }
}
