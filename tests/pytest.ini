[pytest]
# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test directories
testpaths = tests

# Markers for test categories
markers =
    unit: Unit tests with mocks (fast, isolated)
    integration: Integration tests with real components
    e2e: End-to-end CLI tests
    performance: Performance benchmark tests
    slow: Tests that take > 5 seconds
    serial: Tests that must run serially (not in parallel)
    requires_kb: Tests that require a built knowledge base
    requires_gpu: Tests that require GPU/CUDA support

# Coverage settings
addopts =
    --verbose
    --strict-markers
    --tb=short
    --cov=src
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml
    --cov-config=.coveragerc

# Timeout for tests (seconds) - requires pytest-timeout plugin
# timeout = 60

# Parallel execution (install pytest-xdist)
# Uncomment to enable parallel testing
# addopts = -n auto

# Minimum coverage percentage
# Uncomment to enforce minimum coverage
# --cov-fail-under=80

# Output settings
console_output_style = progress
log_cli = false
log_cli_level = INFO

# Ignore warnings from dependencies
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::FutureWarning:sentence_transformers
    ignore::FutureWarning:transformers

# Custom pytest plugins
# plugins =

# Test collection (using filterwarnings instead)
# collect_ignore = ["conftest_fast.py"]
